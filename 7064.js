"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([["7064"],{22714:function(e,t,r){r.r(t),r.d(t,{default:()=>manage_crypto});var n=r(32097),a=r(48990),o=r(3959),i=r(20763),c=r(67911),s=r(65878),l=r(21297),u=r(96486),_=r(67294),y=r(86896),p=r(69473),f=r(67294),InfoAction=function(e){var t=e.onClick,r=e.testid,n=(0,y.Z)().formatMessage,a=(0,_.useMemo)(function(){return(0,u.uniqueId)("import-info-action-")},[]);return f.createElement(f.Fragment,null,f.createElement("div",{"data-tooltip-id":a,"data-tooltip-content":n({id:"manage-crypto.info-action.text"})},f.createElement(c.z,{testid:r,size:s.iY.SMALL,shape:s.AX.ICON_SQUARE,theme:s.jM.TRANSPARENT,noPadding:!0,onClick:t},f.createElement(l.p,{colorClass:"text-utility-1-opacity-1"}))),f.createElement(p.u,{id:a,className:"tw-tooltip"}))},m=r(45851),d=r(87889),b=r(96492),h=r(78729),g=r(15244),v=r(45653),w=r(35670),S=r(83473),E=r(34734),A=r(12820),O=r(96786);function _define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _object_spread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_define_property(e,t,r[t])})}return e}function useManageScreenAssets_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):useManageScreenAssets_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var sortFn=function(e,t){return e.symbol.localeCompare(t.symbol)},useManageScreenAssets=function(){var e=(0,E.E)(),t=(0,A.R)(),r=(0,O.$)(),n=_object_spread({},t,r);return(0,_.useMemo)(function(){return e.reduce(function(e,t){return n[t.blockchainId]&&e.push(_object_spread_props(_object_spread({},t),{blockchain:n[t.blockchainId]})),e},[]).sort(sortFn)},[e,t,r])},I=r(89250),j=r(90738),k=r(19568),P=r(74509),x=r(26086),N=r(71393),C=r(40638),M=r(93281),T=r(85329),L=r(97509),R=r(72953),D=r(24747),F=r(92354),G=r(67260),H=r(53099),U=r(43057),Z=r(67294);function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _array_with_holes(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){r(e);return}c.done?t(s):Promise.resolve(s).then(n,a)}function _async_to_generator(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function _next(e){asyncGeneratorStep(o,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,n,a,_next,_throw,"throw",e)}_next(void 0)})}}function _iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw n}}return o}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(e,t){return _array_with_holes(e)||_iterable_to_array_limit(e,t)||_unsupported_iterable_to_array(e,t)||_non_iterable_rest()}function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _array_like_to_array(e,t)}}function _ts_generator(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var AssetRow=function(e){var t,r,n,i=e.asset,c=(0,k.z)().trackAnalytics,s=(0,y.Z)().formatMessage,l=(0,H.Z)(),u=(0,I.s0)(),p=_sliced_to_array((0,_.useState)(i.isShownInHomeScreen),2),f=p[0],m=p[1],d=_sliced_to_array((0,_.useState)(!1),2),b=d[0],h=d[1],g=(0,U.CG)(function(e){return e.wallet.accounts}),S=(t=_async_to_generator(function(e){return _ts_generator(this,function(t){switch(t.label){case 0:return m(!e.isShownInHomeScreen),h(!0),[4,L.Tl.emit(D.Z.TOGGLE_ASSET_VISIBILITY,e)];case 1:return t.sent(),h(!1),[2]}})}),function(e){return t.apply(this,arguments)}),E=(0,G.z)(i),A=(0,_.useMemo)(function(){var e=E.isCustom?R.Bk.toString():(0,F.EQ)(i.assetId).coinId;return!g[l.id][e]},[g,E]);if(!E)return null;var O=(r=_async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:if(A)return[2];if(f)return[3,2];return[4,S(i)];case 1:e.sent(),e.label=2;case 2:return u("".concat(o.Z.ASSET,"/").concat(i.assetId)),[2]}})}),function(){return r.apply(this,arguments)});return Z.createElement(x.e,{disabled:A||b,onClick:O},Z.createElement("div",{className:"flex justify-between space-x-2 items-center"},Z.createElement("div",{className:A?"opacity-70":"opacity-100"},Z.createElement(N.C,{src:i.iconUrl,name:i.name,network:i.address?E:void 0})),Z.createElement("div",{className:"flex-grow ".concat(A?"opacity-70":"opacity-100")},Z.createElement("div",{className:"flex flex-row space-x-1 items-center "},Z.createElement("div",null,Z.createElement(v.x,{testid:"asset-symbol",type:w.Xi.SUBHEADER_16},i.symbol)),Z.createElement("div",null,Z.createElement(M.V,{theme:T.B.SECONDARY,size:T.c.SMALL,testid:"asset-type"},null!=(n=E.displayName)?n:E.name))),Z.createElement("div",{className:"flex flex-row space-x-1"},Z.createElement(v.x,{testid:"asset-blockchain",type:w.Xi.BODY_14},i.name))),Z.createElement("div",{className:b?"opacity-50":"opacity-100"},A?Z.createElement(P.C,{text:s({id:"manage-assets.support-coming-soon"})}):Z.createElement(C.r,{testid:"toggle-asset-switch",label:i.name,checked:f,onChange:function(){c({event:a.ih.TOGGLE_HOMESCREEN_ASSET_VISIBILITY,props:{pageViewSource:a.pG.MANAGE_CRYPTO,assetName:i.name,assetId:i.assetId,enabled:!f}}),S(i)}}))))},Y=r(67294),AssetList=function(e){var t=e.assets,r=e.loadMoreItems,n=e.hasNextPage,a=window.innerHeight-b.T5-b.Lv-b.sc-b.UI-32-34-16-16-36-16;return Y.createElement(j.Z,{dataLength:t.length,next:r,height:a,className:"tw-scrollbar",hasMore:!!n,loader:null,scrollThreshold:"5px"},Y.createElement("div",{className:"flex flex-col space-y-5"},t.map(function(e){return Y.createElement(AssetRow,{key:e.assetId,asset:e})})))},z=r(96313),B=r(81242),K=r(20126),V=r(55861),X=r(81655),$=r(67294);function manage_crypto_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function manage_crypto_array_with_holes(e){if(Array.isArray(e))return e}function _array_without_holes(e){if(Array.isArray(e))return manage_crypto_array_like_to_array(e)}function manage_crypto_define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _iterable_to_array(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function manage_crypto_iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw n}}return o}}function manage_crypto_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function manage_crypto_object_spread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){manage_crypto_define_property(e,t,r[t])})}return e}function manage_crypto_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function manage_crypto_object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):manage_crypto_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function manage_crypto_sliced_to_array(e,t){return manage_crypto_array_with_holes(e)||manage_crypto_iterable_to_array_limit(e,t)||manage_crypto_unsupported_iterable_to_array(e,t)||manage_crypto_non_iterable_rest()}function _to_consumable_array(e){return _array_without_holes(e)||_iterable_to_array(e)||manage_crypto_unsupported_iterable_to_array(e)||_non_iterable_spread()}function manage_crypto_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return manage_crypto_array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return manage_crypto_array_like_to_array(e,t)}}var getFilteredAssets=function(e){var t=e.search,r=e.assets;return t?r.filter(function(e){var r=e.symbol,n=e.name,a=e.address;return(null==a?void 0:a.toLowerCase().includes(t.toLowerCase()))||r.toLowerCase().includes(t.toLowerCase())||n.toLowerCase().includes(t.toLowerCase())}):r};let manage_crypto=function(){(0,i.d)({event:a.pG.MANAGE_CRYPTO,props:null});var e=(0,y.Z)().formatMessage,t=(0,I.s0)(),r=useManageScreenAssets(),l=(0,H.Z)(),p=(0,K.s)(),f=(0,X.M)(),E=(0,_.useMemo)(function(){var e=p.find(function(e){return e.id===f});return e?[(0,F.tI)(e.coinId)]:null},[p,f]),A=manage_crypto_sliced_to_array((0,_.useState)(""),2),O=A[0],j=A[1],k=manage_crypto_sliced_to_array((0,_.useState)(!1),2),P=k[0],x=k[1],N=(0,S.e)(E,!0),C=N.flattenData,M=N.isFetching,T=N.setQuery,L=N.fetchNextPage,R=N.hasNextPage,D=(0,B.x)(),G=(0,_.useRef)(!1),U=(0,_.useMemo)(function(){return getFilteredAssets({search:O,assets:r})},[r,O]),Z=(0,_.useCallback)((0,u.debounce)(function(e){x(!0),T(e)},200),[]),onImportAssetClick=function(){t(o.Z.CUSTOM_ASSET_SELECT_NETWORK)},Y=(0,_.useMemo)(function(){return C.map(function(e){return e.assetId})},[C]),q=(0,_.useMemo)(function(){return new Map(r.map(function(e){return[e.assetId,e.isShownInHomeScreen]}))},[r]),Q=(0,_.useMemo)(function(){return _to_consumable_array(U.filter(function(e){return!Y.includes(e.assetId)})).concat(_to_consumable_array(C.map(function(e){return manage_crypto_object_spread_props(manage_crypto_object_spread({},e),{isShownInHomeScreen:e.isShownInHomeScreen||q.get(e.assetId)})}))).sort(function(e,t){return e.isShownInHomeScreen!==t.isShownInHomeScreen?e.isShownInHomeScreen?-1:1:e.symbol.localeCompare(t.symbol)}).filter(function(e){if(l.type===z.S.PRIVATE_KEY){var t=(0,F.Jo)(e.assetId);return!!D[l.id][t]&&(!f||f===e.blockchainId)}return!f||f===e.blockchainId})},[U,q,C,Y,f]);(0,_.useEffect)(function(){if(M&&!G.current){G.current=!0;return}!M&&G.current&&(x(!1),G.current=!1)},[M]),(0,_.useMemo)(function(){if(l.type===z.S.PRIVATE_KEY)return Object.keys(D[l.id]).map(function(e){return"c"+e})},[D,p,l]);var W=(0,_.useMemo)(function(){return P?$.createElement(d.M,null,$.createElement("div",null,$.createElement(g.$,{size:h.m.XLARGE}))):0===Q.length?$.createElement(n.i,{message:e({id:"token-asset-list.empty-search-caption"})}):$.createElement("div",{className:"mt-4"},$.createElement(AssetList,{assets:Q,hasNextPage:R,loadMoreItems:L}),$.createElement("div",{className:"mt-4"},$.createElement(c.z,{testid:"import-asset-btn",size:s.iY.SMALL,shape:s.AX.DEFAULT,theme:s.jM.TRANSPARENT,onClick:onImportAssetClick},$.createElement(v.x,{theme:w.W5.BRAND,type:w.Xi.SUBHEADER_14},e({id:"manage-crypto.import-asset"})))))},[P,Q,R,L,onImportAssetClick,e]);return $.createElement(b._z,null,$.createElement(b.mr,{backAction:function(){return t(o.Z.DEFAULT)},title:e({id:"manage-crypto.title"}),infoAction:$.createElement(InfoAction,{testid:"import-asset-info-action",onClick:onImportAssetClick})}),$.createElement(b.xV,null,$.createElement(m.M,{testid:"search-asset-input",value:O,onChange:function(e){x(!0),j(e.target.value),Z(e.target.value)},placeholder:e({id:"component.input-asset-search.placeholder"})}),$.createElement("div",{className:"mt-4"},$.createElement(V.N,{showText:!0})),W))}},40638:function(e,t,r){r.d(t,{r:()=>Switch});var n=r(95665),a=r(67294),Switch=function(e){var t=e.label,r=e.checked,o=e.testid,i=e.disabled,c=e.onChange;return a.createElement(n.rs,{"data-testid":o,checked:r,onChange:c,className:"switch",onClick:function(e){return e.stopPropagation()},disabled:i},t&&a.createElement("span",{className:"sr-only"},t),a.createElement("span",{"aria-hidden":"true",className:"switch__toggle"}))}},83473:function(e,t,r){r.d(t,{e:()=>useRemoteAssetsSearch});var n=r(12607),a=r(67294),o=r(97509),i=r(24747);function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _array_with_holes(e){if(Array.isArray(e))return e}function _iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw n}}return o}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(e,t){return _array_with_holes(e)||_iterable_to_array_limit(e,t)||_unsupported_iterable_to_array(e,t)||_non_iterable_rest()}function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _array_like_to_array(e,t)}}function useRemoteAssetsSearch(e,t){var r=_sliced_to_array((0,a.useState)(),2),c=r[0],s=r[1],l=(0,n.N)({queryKey:["tokens",c,null==e?void 0:e.join()],queryFn:function(r){var n=r.pageParam;return o.Tl.emit(i.Z.SEARCH_ASSETS,{query:c,networks:e,page:n,includeNonCustomTokenNetworks:t})},initialPageParam:0,refetchOnWindowFocus:!1,getNextPageParam:function(e){return null==e?void 0:e.nextPage}}),u=l.data,_=l.error,y=l.fetchNextPage,p=l.hasNextPage,f=l.isFetching,m=l.isFetchingNextPage,d=l.status,b=(0,a.useMemo)(function(){return((null==u?void 0:u.pages)||[]).flatMap(function(e){return(null==e?void 0:e.data)||[]})},[null==u?void 0:u.pages]);return{setQuery:s,data:u,error:_,fetchNextPage:y,hasNextPage:p,isFetching:f,isFetchingNextPage:m,status:d,flattenData:b}}}}]);