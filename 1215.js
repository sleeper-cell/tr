"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([["1215"],{46937:function(e,t,n){n.d(t,{m:()=>o,w:()=>i});var r,a,o=((r={}).INITIATE="initiate",r.UPDATE="update",r.CLOSE="close",r),i=((a={}).recipient="recipient",a.meta="meta",a.amount="amount",a.maxAmount="maxAmount",a)},12427:function(e,t,n){n.r(t),n.d(t,{default:()=>eV,App:()=>App});var r=n(89250),a=n(97527),o=n(3959),i=n(53866),l=n(58150),c=n(90006),s=n(63032),u=n(12984),m=n(18298),d=n(13858),p=n(89438),_=n(71724),f=n(83388),y=n(55942),b=n(67294),h=n(86896),v=n(67294),TransactionNFTTotalFiatTRow=function(e){var t=e.blockchain,n=e.fee,r=(0,h.Z)().formatMessage,a=(0,_.Kw)(t.coinId),o=(0,f.C)(a),i=(0,p.u)(),l=i.currency,c=i.baseCurrencyType,s=(0,b.useMemo)(function(){var e;return(0,y.Z)(n).mul(null!=(e=null==o?void 0:o.price)?e:0).toNumber()},[n,o]);return s?v.createElement(m.U,{label:r({id:"generic.total-fiat"},{currency:l}),labelInfoBox:r({id:"generic-total-fiat-info"},{currency:l})},v.createElement(d.l,{value:s,amountType:c,testid:"total-fiat-amount",currency:l})):null},E=n(79694),g=n(16431),S=n(67911),T=n(65878),N=n(2978),w=n(96492),A=n(94314),C=n(45653),x=n(35670),I=n(22252),O=n(78062),k=n(46736),P=n(74971),R=n(95096),F=n(67294),NFTDetails=function(e){var t,n=e.network,r=e.customNonce,a=e.isLoading,o=e.to,i=e.memo,l=e.amount,c=e.supportsMemo,s=e.undervaluedGas,u=e.prepareSendResponse,p=e.toggleEditFeeModal,_=e.canEditFee,f=e.supportsNonce,y=e.toggleEditNonceModal;e.isRisky;var b=(0,h.Z)().formatMessage,v=(0,P.F)(),j=(0,I.t)().isCustomNonceEnabled,M=(0,k.mA)(n.coinId),D=parseInt(r.editedNonce)<r.originalNonce;if(!M)throw Error("Account for ".concat(n.coinId," not found"));return F.createElement(w.Wo,null,F.createElement(g.V,{network:n,sender:M.address}),F.createElement(E.j,{recipient:o,type:O.k.Send,network:n}),c&&i&&F.createElement(m.U,{label:b({id:"input-memo.placeholder"})},F.createElement(C.x,null,i)),F.createElement(m.U,{label:b({id:"generic.network"})},F.createElement(C.x,{testid:"network-name"},n.name)),l&&Number(l)>1&&F.createElement(m.U,{label:b({id:"generic.amount"})},F.createElement(d.l,{testid:"send-token-amount",value:l,currency:"",amountType:R.F6.CRYPTO})),F.createElement(m.U,{label:b({id:"generic.estimated-network-fee"}),labelTheme:s?x.W5.WARNING:x.W5.PRIMARY,warning:s?b({id:"send.low-gas-warning"}):null,labelInfoBox:v?b({id:"send.confirm.hardware-wallet-gas-info"}):null},a?F.createElement(A.A,{widthClass:"w-22.5",heightClass:"h-4"}):F.createElement(d.l,{value:null==u?void 0:u.formattedFee,currency:n.symbol,amountType:R.F6.CRYPTO,maxSignificantDecimals:10,tinyThreshold:10,testid:"network-fee"}),_&&F.createElement("div",{className:"pl-1"},F.createElement(S.z,{noPadding:!0,theme:T.jM.TRANSPARENT,onClick:p,testid:"edit-network-fee-button"},F.createElement(N.v,{width:15,height:15,colorClass:s?"text-textBrand":"text-iconNormal"})))),j&&f&&F.createElement(m.U,{labelTheme:D?x.W5.WARNING:x.W5.PRIMARY,label:b({id:"generic.transaction-nonce"}),warning:D?b({id:"send.nonce-warning"}):null},F.createElement("div",null,F.createElement(C.x,{theme:D?x.W5.WARNING:x.W5.PRIMARY},r.editedNonce)),F.createElement("div",{className:"pl-1"},F.createElement(S.z,{noPadding:!0,theme:T.jM.TRANSPARENT,onClick:y},F.createElement(N.v,{width:15,height:15,colorClass:D?"text-textBrand":"text-iconNormal"})))),F.createElement(TransactionNFTTotalFiatTRow,{blockchain:n,fee:parseFloat(null!=(t=null==u?void 0:u.formattedFee)?t:"0")}))},j=n(33138),M=n(71393),D=n(78729),Z=n(67294),NFTSummary=function(e){var t=e.nft,n=e.network,r=(0,h.Z)().formatMessage,a=t.name.length?t.name:"".concat(t.collectionName," #").concat(t.onChainId);return Z.createElement("div",{className:"flex items-center space-x-2"},Z.createElement("div",null,Z.createElement(M.C,{src:t.previewImageURL.url,name:a,network:n,size:D.m.LARGE})),Z.createElement("div",{className:"flex flex-col"},Z.createElement(C.x,{type:x.Xi.HEADER},a),Z.createElement(C.x,{type:x.Xi.SUBTITLE,theme:x.W5.SECONDARY},r({id:"generic.send"})," NFT")))},G=n(97509),L=n(65048),V=n(58421),W=n(65777),U=n(53099),Y=n(71548),B=n(44399),X=n(90980),z=n(2593),J=n(25392),$=n(92354),K=n(10699),H=n(20763),q=n(48990),Q=n(19568),ee=n(77629),et=n(67294);function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _array_with_holes(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,a)}function _async_to_generator(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function _next(e){asyncGeneratorStep(o,r,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,r,a,_next,_throw,"throw",e)}_next(void 0)})}}function _define_property(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _iterable_to_array_limit(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_define_property(e,t,n[t])})}return e}function _sliced_to_array(e,t){return _array_with_holes(e)||_iterable_to_array_limit(e,t)||_unsupported_iterable_to_array(e,t)||_non_iterable_rest()}function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(e,t)}}function _ts_generator(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(n)throw TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var NFTContent=function(e){var t=e.state,n=t.collection,i=t.nft,m=t.network,d=t.to,p=t.memo,_=t.amount;(0,H.d)({event:q.pG.SEND_CONFIRM_NFT,props:null});var f=(0,W.l)(),v=(0,Q.z)().trackAnalytics,E=(0,$.TN)({coinId:m.coinId}),g=(0,ee.w)(m),S=(0,k.mA)(m.coinId),T=_sliced_to_array((0,b.useState)(!1),2),N=T[0],A=T[1],C=_sliced_to_array((0,b.useState)(!0),2),x=C[0],R=C[1],F=_sliced_to_array((0,b.useState)(!1),2),M=F[0],D=F[1];if(!S)throw Error("Account for ".concat(m.coinId," not found"));if(!g)throw Error('Could not find native asset for chain ID "'.concat(m.chainId,'".'));var Z=(0,h.Z)().formatMessage,en=(0,r.s0)(),er=(0,b.useContext)(a._),ea=(0,P.F)(),eo=(0,I.t)().isCustomNonceEnabled,ei=_sliced_to_array((0,b.useState)(!1),2),el=ei[0],ec=ei[1],es=_sliced_to_array((0,b.useState)(!1),2),eu=es[0],em=es[1],ed=(0,J.f)(),ep=_sliced_to_array((0,b.useState)(!1),2),e_=ep[0],ef=ep[1],ey=_sliced_to_array((0,b.useState)(null),2),eb=ey[0],eh=ey[1],ev=_sliced_to_array((0,b.useState)(null),2),eE=ev[0],eg=ev[1],eS=_sliced_to_array((0,b.useState)(null),2),eT=eS[0],eN=eS[1],ew=_sliced_to_array((0,b.useState)(null),2),eA=ew[0],eC=ew[1],ex=_sliced_to_array((0,b.useState)(null),2),eI=ex[0],eO=ex[1],ek=_sliced_to_array((0,b.useState)(null),2),eP=ek[0],eR=ek[1],eF=_sliced_to_array((0,b.useState)(),2),ej=eF[0],eM=eF[1],eD=_sliced_to_array((0,b.useState)(!1),2),eZ=eD[0],eG=eD[1],eL=_sliced_to_array((0,b.useState)(!1),2),eV=eL[0],eW=eL[1],eU=_sliced_to_array((0,b.useState)({originalNonce:0,editedNonce:""}),2),eY=eU[0],eB=eU[1],eX=_sliced_to_array((0,b.useState)(K.J.DEFAULT),2),ez=eX[0],eJ=eX[1],e$=(0,u.a)(),eK=e$.setShowLedgerConfirmationHint,eH=e$.handleLedgerError,eq=e$.LedgerConnectionErrorModal,eQ=(0,U.Z)(),e0=(0,b.useMemo)(function(){return _object_spread({memo:p,from:S.address,to:d,value:null!=_?_:"1",internal:{type:"send",isMax:!1,asset:{decimals:0,address:i.contractAddress,assetId:E,nft:i}},network:m},eT&&{gasLimit:eT},eA&&{gasPrice:eA},eI&&{maxPriorityFeePerGas:eI},eP&&{maxFeePerGas:eP},(null==ed?void 0:ed.estimatedBaseFee)&&{baseFee:(0,y.Z)(ed.estimatedBaseFee).pow(g.decimals).toFixed(0)})},[S.address,eT,eA,eP,eI,p,m,d]),e1=(0,b.useCallback)(function(){return eG(!eZ)},[eZ]),toggleEditNonceModal=function(){em(function(e){return!e})},e2=(0,b.useCallback)(function(e,t){var n=e.customGasLimit,r=e.customGasPrice,a=e.customMaxPriorityFeePerGas,o=e.customMaxFeePerGas,i=e.minGasFeesAcceptable;n&&eN(n),r&&eC(r),a&&eO(a),o&&eR(o),i&&eM(i),t&&eJ(t),eG(!1)},[]),e4=(0,b.useCallback)(function(){var e=eY.editedNonce,t=e&&Number(e)>=0,n=!(null==e?void 0:e.includes("."))&&!(null==e?void 0:e.includes(","));return!!t&&n},[eY]),e5=(0,b.useCallback)(_async_to_generator(function(){var e,t;return _ts_generator(this,function(n){switch(n.label){case 0:ec(!0),eg(null),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,G.Tl.emit(L.Z.STAGE_TRANSACTION,e0)];case 2:return eh(e=n.sent()),eo&&eB(function(t){return{originalNonce:parseInt(e.nonce),editedNonce:t.editedNonce||String(parseInt(e.nonce))}}),[3,5];case 3:if("RecipientTokenNotRegisteredError"===(t=n.sent()).message)return eg(Z({id:"send.confirm.recipient-not-registered-token"})),[2];if("TransferCallerNotOwnerNorApproved"===t.message)return eg(Z({id:"send.confirm.recipient-not-owner-nor-approved"})),[2];return X.Z.error(t),eg(Z({id:"send.confirm.validation.generic"})),[3,5];case 4:return ec(!1),[7];case 5:return[2]}})}),[e0,Z,eo]),e6=(0,b.useMemo)(function(){if(!eb)return{isValid:!0};var e=(0,y.Z)(0).add(eb.formattedFee).lte(f[g.assetId].balance);return{isValid:e,error:e?void 0:Z({id:"generic.insufficient-balance-for-gas"},{assetSymbol:g.symbol})}},[f,Z,g.assetId,g.symbol,m.symbol,eb]),e9=(0,b.useMemo)(function(){return!el&&!!eb&&!eE&&e6.isValid&&(!eo||!x||e4())},[el,eb,eE,e6.isValid,eo,x,e4]),sendSuccessEvent=function(){v({event:q.ih.SEND_NFT_TRANSACTION,props:{pageViewSource:q.pG.SEND_CONFIRM_NFT,txType:O.k.Send,walletType:eQ.type,nftId:i.id,nftCollectionId:i.collectionId,blockchainId:m.id,nftType:i.type,txStatus:"confirmed"}})},sendCrashEvent=function(e){v({event:q.ih.SEND_NFT_TRANSACTION,props:{pageViewSource:q.pG.SEND_CONFIRM_NFT,txType:O.k.Send,walletType:eQ.type,nftId:i.id,nftCollectionId:i.collectionId,blockchainId:m.id,nftType:i.type,txStatus:"failed",txError:e}})},e7=(0,b.useCallback)(_async_to_generator(function(){var e,t,n,r,a;return _ts_generator(this,function(i){switch(i.label){case 0:2===(e={to:eb.to,gasLimit:parseInt(eb.fee.gasLimit||eb.fee.limit),nonce:parseInt(eb.nonce),chainId:parseInt(null==eb?void 0:eb.network.chainId),data:eb.data,type:parseInt(eb.type),value:eb.value}).type?(e.maxFeePerGas=z.O$.from(null!=(t=eb.maxFeePerGas)?t:eb.fee.maxPrice),e.maxPriorityFeePerGas=z.O$.from(null!=(n=eb.maxPriorityFeePerGas)?n:eb.fee.minerPrice)):e.gasPrice=parseInt(eb.fee.price),i.label=1;case 1:return i.trys.push([1,4,5,6]),eW(!0),[4,(0,B.dS)(e,null==eQ?void 0:eQ.hardwareAccountIndex,null==eb?void 0:eb.from)];case 2:return r=i.sent(),[4,G.Tl.emit(L.Z.BROADCAST_TRANSACTION,{signed:r,metadata:eb,blockchainId:m.id,raw:!0})];case 3:return i.sent()?(sendSuccessEvent(),en(o.Z.HISTORY)):(sendCrashEvent(""),ef(!0)),[3,6];case 4:return"TransportStatusError"===(a=i.sent()).name&&eH(a,eg),sendCrashEvent(a),[3,6];case 5:return eW(!1),[7];case 6:return[2]}})}),[eH,en,m.id,eb,null==eQ?void 0:eQ.hardwareAccountIndex]),e3=(0,b.useCallback)(function(){er.address=d,er.amount=_,en(-1)},[er,en,d]),e8=eb&&parseFloat(eb.formattedFee)<ej;return(0,b.useEffect)(function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,G.Tl.emit(V.Z.START_POLL_GAS_FEES,e0)];case 1:return e.sent(),[2]}})})().catch(Y.G1),function(){G.Tl.emit(V.Z.STOP_POLL_GAS_FEES)}},[]),(0,b.useEffect)(function(){e5()},[ed,e5]),(0,b.useEffect)(function(){function _supportsMemo(){return(_supportsMemo=_async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,G.Tl.emit(L.Z.SUPPORTS_MEMO,m.id)];case 1:return A(e.sent()),[2]}})})).apply(this,arguments)}function _supportsNonce(){return(_supportsNonce=_async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,G.Tl.emit(L.Z.SUPPORTS_NONCE,m.id)];case 1:return R(e.sent()),[2]}})})).apply(this,arguments)}function _supportsCustomFee(){return(_supportsCustomFee=_async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,G.Tl.emit(L.Z.SUPPORTS_CUSTOM_FEE,m)];case 1:return D(e.sent()),[2]}})})).apply(this,arguments)}Promise.all([function(){return _supportsMemo.apply(this,arguments)}(),function(){return _supportsNonce.apply(this,arguments)}(),function(){return _supportsCustomFee.apply(this,arguments)}()])},[m.id]),et.createElement(w._z,null,et.createElement(w.mr,{backAction:e3,title:Z({id:"generic.confirm"})}),et.createElement(w.xV,null,et.createElement(NFTSummary,{nft:i,network:n.blockchain}),et.createElement(NFTDetails,{network:m,customNonce:eY,isLoading:el,to:d,memo:p,amount:_,supportsMemo:N,undervaluedGas:e8,prepareSendResponse:eb,toggleEditFeeModal:e1,canEditFee:M,supportsNonce:x,toggleEditNonceModal:toggleEditNonceModal})),et.createElement(j.$,{blockchainName:m.name,genericError:eE,validationBalanceError:e6.error,transactionIsValid:e9,isSendingTransaction:eV,onSendTransaction:function(){e9&&_async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(!ea)return[3,5];eK(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e7()];case 2:return t.sent(),[3,4];case 3:return eH(t.sent(),eg),[3,4];case 4:case 8:return[2];case 5:return t.trys.push([5,7,,8]),eW(!0),[4,G.Tl.emit(L.Z.COMMIT_TRANSACTION,eb)];case 6:if(!t.sent())throw Error("Transaction failed");return sendSuccessEvent(),en(o.Z.HISTORY),[3,8];case 7:return e=t.sent(),X.Z.error(e),sendCrashEvent(e),eW(!1),ef(!0),[3,8]}})})()},txType:O.k.Send,buttonText:Z({id:"generic.confirm"})}),eb&&M&&et.createElement(l.R,{defaultEIP1559Speed:ez,isOpen:eZ,onClose:function(){return eG(!1)},onSave:e2,params:e0,tx:eb}),et.createElement(s.T,{opened:e_,onClose:function(){return ef(!1)},onContinue:e3}),eo&&x&&eb&&et.createElement(c.J,{opened:eu,onClose:toggleEditNonceModal,customNonce:eY,setCustomNonce:eB,setTxData:eh}),et.createElement(eq,null))},en=n(67294);function isStateAssetRelated(e){return e&&"asset"in e&&"amount"in e}function isStateNFTRelated(e){return e&&"collection"in e&&"nft"in e}var Confirm=function(){var e=(0,r.TH)().state,t=(0,r.s0)();return(e||X.Z.error("".concat(o.Z.SEND_CONFIRM,' -  "').concat(e,'" is not valid.')),(0,b.useEffect)(function(){e||t(o.Z.DEFAULT)},[]),isStateAssetRelated(e))?en.createElement(i.K,{state:e}):isStateNFTRelated(e)?en.createElement(NFTContent,{state:e}):null},er=n(46937),ea=n(46075),eo=n(57457),ei=n(46856),el=n(87889),ec=n(15244),es=n(80584),eu=n(2036),em=n(25252),ed=n(58082),ep=n(96486),e_=n(26679),ef=n(99303),ey=n(27826),eb=n(43057),eh=n(67294);function Crypto_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Crypto_array_with_holes(e){if(Array.isArray(e))return e}function Crypto_asyncGeneratorStep(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,a)}function Crypto_async_to_generator(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function _next(e){Crypto_asyncGeneratorStep(o,r,a,_next,_throw,"next",e)}function _throw(e){Crypto_asyncGeneratorStep(o,r,a,_next,_throw,"throw",e)}_next(void 0)})}}function Crypto_define_property(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Crypto_iterable_to_array_limit(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}function Crypto_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Crypto_object_spread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Crypto_define_property(e,t,n[t])})}return e}function Crypto_sliced_to_array(e,t){return Crypto_array_with_holes(e)||Crypto_iterable_to_array_limit(e,t)||Crypto_unsupported_iterable_to_array(e,t)||Crypto_non_iterable_rest()}function Crypto_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return Crypto_array_like_to_array(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Crypto_array_like_to_array(e,t)}}function Crypto_ts_generator(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(n)throw TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var Crypto=function(e){var t,n,i,l,c,s,u,m,p,f,v=e.assetId,E=(0,h.Z)().formatMessage,g=(0,r.s0)(),T=null==(i=(0,U.Z)())||null==(n=i.warning)?void 0:n.showWarning,N=(0,P.F)(),A=(0,b.useContext)(a._),I=(0,_.N6)(v);if(!I)throw Error('Could not find asset for assetId "'.concat(v,'"'));(0,H.d)({event:q.pG.SEND_PREPARE_CRYPTO,props:null});var k=(0,eu.q)(I.blockchainId),F=(0,em.y)(I.blockchainId),j=(0,eb.CG)(function(e){return e.sdkFeatures.prepareSend}),Z=Crypto_sliced_to_array((0,b.useState)(null!=(u=A.address)?u:""),2),L=Z[0],V=Z[1],Y=Crypto_sliced_to_array((0,b.useState)(null!=(m=A.amount)?m:""),2),B=Y[0],X=Y[1],z=Crypto_sliced_to_array((0,b.useState)(null!=(p=A.memoOrTag)?p:""),2),J=z[0],K=z[1],Q=Crypto_sliced_to_array((0,b.useState)(!1),2),ee=Q[0],et=Q[1],en=Crypto_sliced_to_array((0,b.useState)(!1),2),ev=en[0],eE=en[1],eg=Crypto_sliced_to_array((0,b.useState)(!1),2),eS=eg[0],eT=eg[1],eN=F||k,ew=!!(null==(l=A.inscriptions)?void 0:l.length),eA=(0,W.l)(),eC=(0,ed.d)(I.assetId),ex=(0,b.useMemo)(function(){var e,t;return{memo:null==j?void 0:j.meta,asset:I,network:eN,amount:null!=(e=null==j?void 0:j.amount)?e:"",to:null!=(t=null==j?void 0:j.address)?t:"",inscriptions:A.inscriptions,type:O.k.Send,isMax:(0,y.p)(B||"0").eq(null!=eC?eC:0)}},[null==j?void 0:j.amount,I,eN,A.inscriptions,null==j?void 0:j.address,null==j?void 0:j.meta,B,eC]);(0,b.useEffect)(function(){function _initiatePrepareSend(){return(_initiatePrepareSend=Crypto_async_to_generator(function(){var e,t,n,r,a;return Crypto_ts_generator(this,function(o){switch(o.label){case 0:return r=[{property:er.w.amount,value:null!=(e=A.amount)?e:""},{property:er.w.meta,value:null!=(t=A.memoOrTag)?t:""},{property:er.w.recipient,value:null!=(n=A.address)?n:""}].filter(function(e){return!!e.value}),a={action:er.m.INITIATE,params:Crypto_object_spread({crypto:{asset:I},initialState:r},A.inscriptions&&{inscriptions:{inscriptions:A.inscriptions,amount:A.amount}})},[4,G.Tl.emit(es.Z.PREPARE_SEND,a)];case 1:return o.sent(),[2]}})})).apply(this,arguments)}eA[v]&&!ev&&(!function(){_initiatePrepareSend.apply(this,arguments)}(),eE(!0))},[eA]),(0,b.useEffect)(function(){if(ee){var e;X(null!=(e=null==j?void 0:j.amount)?e:B),et(!1)}},[null==j?void 0:j.amount]);var eI=(0,ep.debounce)(function(e,t){G.Tl.emit(es.Z.PREPARE_SEND,{action:er.m.UPDATE,params:{property:e,value:t}})},200),onRecipientChange=function(e){V(e),eI(er.w.recipient,e)},onMemoChange=function(e){K(e),eI(er.w.meta,e)},onAmountChange=function(e){isNaN(Number(e))||e.startsWith("0x")||(X(e),eI(er.w.amount,e))},onMaxBalanceClick=function(){et(!0),G.Tl.emit(es.Z.PREPARE_SEND,{action:er.m.UPDATE,params:{property:er.w.maxAmount}})},eO=(t=Crypto_async_to_generator(function(e){return Crypto_ts_generator(this,function(t){switch(t.label){case 0:if(eT(!1),!(null==e?void 0:e.address))return[2];return onRecipientChange(e.address),[4,new Promise(function(e){return setTimeout(e,200)})];case 1:return t.sent(),onMemoChange(e.memo||J||""),[2]}})}),function(e){return t.apply(this,arguments)}),ek=(0,b.useMemo)(function(){var e,t;return Object.values(null!=(e=null==j?void 0:j.metaType)?e:{}).includes("Memo")||Object.values(null!=(t=null==j?void 0:j.metaType)?t:{}).includes("Object")},[j]),eP=(0,b.useMemo)(function(){var e;return Object.values(null!=(e=null==j?void 0:j.metaType)?e:{}).includes("Tag")},[j]);return(null==j?void 0:j.isLoading)||!eA[v]?eh.createElement(el.M,null,eh.createElement(ec.$,{size:D.m.XLARGE})):eh.createElement(w._z,null,eh.createElement(w.mr,{backAction:function(){return g(-1)},title:E({id:"send.title"},{assetSymbol:I.symbol})}),eh.createElement(w.xV,null,T&&eh.createElement("div",{className:"pb-4"},eh.createElement(ea.J,null)),eh.createElement(w.Wo,null,eh.createElement("div",{className:"flex flex-col space-y-1 text-center pb-4"},eh.createElement("div",{className:"flex justify-center"},eh.createElement(M.C,{src:I.iconUrl,name:I.name,network:I.address?eN:void 0,size:D.m.MEDIUM})),eh.createElement(C.x,{type:x.Xi.BODY_14,theme:x.W5.UTILITY_1_OPACITY_1},E({id:"generic.on-network"},{networkName:null!=(f=eN.displayName)?f:eN.name}))),eh.createElement("div",{className:"pb-4"},eh.createElement(ei.o,{testid:"input-recipient",label:E({id:"input-address.address.label"}),value:L||"",onChange:function(e){return onRecipientChange(e.target.value)},placeholder:E({id:"input-address.address.placeholder"}),actions:[{key:"address-input-action-address-book",placeholder:eh.createElement(ef.W,null),onClick:function(){eT(!0)}}],validation:(0,e_.C)(null==j?void 0:j.addressError),autoFocus:!0})),!ew&&eh.createElement(eh.Fragment,null,(ek||eP)&&eh.createElement("div",{className:"pb-4"},eh.createElement(ei.o,{testid:"input-memo-tag",label:E(ek?{id:"input-memo.memo.label"}:{id:"input-tag.tag.label"}),value:J,onChange:function(e){return onMemoChange(e.target.value)},placeholder:E(ek?{id:"input-memo.memo.placeholder"}:{id:"input-tag.tag.placeholder"}),validation:eP?(0,e_.C)(null==j?void 0:j.metaError):void 0})),eh.createElement("div",{className:"pb-4"},eh.createElement(ei.o,{testid:"input-amount",label:E({id:"input-amount.amount.label"}),value:B,onlyPositive:!0,onChange:function(e){return onAmountChange(e.target.value)},placeholder:E({id:"input-amount.amount.placeholder"}),validation:(0,e_.C)(null==j?void 0:j.amountError),actions:[{key:"1",placeholder:eh.createElement(C.x,{theme:x.W5.PRIMARY_DEFAULT,type:x.Xi.SUBHEADER_14},"MAX"),onClick:function(){return onMaxBalanceClick()}}]}),eh.createElement("div",{className:"flex space-x-1"},eh.createElement(C.x,{weight:x.kx.NORMAL,type:x.Xi.CAPTION_12,theme:x.W5.UTILITY_1_OPACITY_1},E({id:"send.balance"}),":"),eh.createElement(d.l,{testid:"account-balance",weight:x.kx.NORMAL,textType:x.Xi.CAPTION_12,theme:x.W5.UTILITY_1_OPACITY_1,amountType:R.F6.CRYPTO,value:eC,currency:I.symbol,maxSignificantDecimals:10})),!!Number(null==(c=eA[I.assetId])?void 0:c.dust)&&eh.createElement("div",{className:"flex space-x-1"},eh.createElement(C.x,{weight:x.kx.NORMAL,type:x.Xi.CAPTION_12,theme:x.W5.UTILITY_1_OPACITY_1},E({id:"send.dust-balance"}),":"),eh.createElement(d.l,{weight:x.kx.NORMAL,textType:x.Xi.CAPTION_12,theme:x.W5.UTILITY_1_OPACITY_1,amountType:R.F6.CRYPTO,value:null==(s=eA[I.assetId])?void 0:s.dust,currency:I.symbol,maxSignificantDecimals:10}))))),N&&eh.createElement("div",{className:"pb-4"},eh.createElement(eo.C,{blockchainName:eN.name})),eh.createElement(S.z,{testid:"button-prepare-send-tx",disabled:!(null==j?void 0:j.isNextEnabled),onClick:function(){return g(o.Z.SEND_CONFIRM,{state:ex})}},E({id:"generic.preview"}))),eS&&eh.createElement(ey.Y,{isOpened:eS,coinId:(0,$.Jo)(I.assetId),onClose:eO}))},ev=n(9984),eE=n(90560),eg=n(67294);function NFT_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function NFT_array_with_holes(e){if(Array.isArray(e))return e}function NFT_asyncGeneratorStep(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,a)}function NFT_async_to_generator(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function _next(e){NFT_asyncGeneratorStep(o,r,a,_next,_throw,"next",e)}function _throw(e){NFT_asyncGeneratorStep(o,r,a,_next,_throw,"throw",e)}_next(void 0)})}}function NFT_iterable_to_array_limit(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}function NFT_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function NFT_sliced_to_array(e,t){return NFT_array_with_holes(e)||NFT_iterable_to_array_limit(e,t)||NFT_unsupported_iterable_to_array(e,t)||NFT_non_iterable_rest()}function NFT_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return NFT_array_like_to_array(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NFT_array_like_to_array(e,t)}}function NFT_ts_generator(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(n)throw TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var NFT=function(e){var t,n,i,l,c,s=e.collectionId,u=e.nftId,m=(0,h.Z)().formatMessage,d=(0,r.s0)(),p=null==(n=(0,U.Z)())||null==(t=n.warning)?void 0:t.showWarning,_=(0,P.F)(),f=(0,b.useContext)(a._),y=(0,ev.C)(s);if(!y)throw Error('Could not find collection for collectionId "'.concat(s,'"'));var v=(0,eE.s)(s,u),E=(0,eb.CG)(function(e){return e.sdkFeatures.prepareSend});if(!v)throw Error("NFT Id is missing.");(0,H.d)({event:q.pG.SEND_PREPARE_NFT,props:null});var g=NFT_sliced_to_array((0,b.useState)(null!=(i=f.address)?i:""),2),T=g[0],N=g[1],A=NFT_sliced_to_array((0,b.useState)(null!=(l=f.memoOrTag)?l:""),2),I=A[0],O=A[1],k=NFT_sliced_to_array((0,b.useState)(null!=(c=f.amount)?c:""),2),R=k[0],F=k[1],j=NFT_sliced_to_array((0,b.useState)(!1),2),Z=j[0],L=j[1],V=(0,b.useMemo)(function(){var e,t,n;return{memo:null!=(e=null==E?void 0:E.meta)?e:void 0,network:y.blockchain,to:null!=(t=null==E?void 0:E.address)?t:"",amount:null!=(n=null==E?void 0:E.amount)?n:"",collection:y,nft:v}},[I,y.blockchain,T]);(0,b.useEffect)(function(){function _initiatePrepareSend(){return(_initiatePrepareSend=NFT_async_to_generator(function(){var e,t,n,r,a;return NFT_ts_generator(this,function(o){switch(o.label){case 0:return r=[{property:er.w.amount,value:null!=(e=f.amount)?e:""},{property:er.w.meta,value:null!=(t=f.memoOrTag)?t:""},{property:er.w.recipient,value:null!=(n=f.address)?n:""}].filter(function(e){return!!e.value}),a={action:er.m.INITIATE,params:{nft:{nft:v,blockchain:y.blockchain},initialState:r}},[4,G.Tl.emit(es.Z.PREPARE_SEND,a)];case 1:return o.sent(),[2]}})})).apply(this,arguments)}!function(){_initiatePrepareSend.apply(this,arguments)}()},[]),(0,b.useEffect)(function(){if(Z){var e;F(null!=(e=null==E?void 0:E.amount)?e:R),L(!1)}},[null==E?void 0:E.amount]);var W=(0,ep.debounce)(function(e,t){G.Tl.emit(es.Z.PREPARE_SEND,{action:er.m.UPDATE,params:{property:e,value:t}})},200),onRecipientChange=function(e){N(e),W(er.w.recipient,e)},onAmountChange=function(e){F(e),W(er.w.amount,e)},onMemoChange=function(e){O(e),W(er.w.meta,e)},onMaxBalanceClick=function(){L(!0),G.Tl.emit(es.Z.PREPARE_SEND,{action:er.m.UPDATE,params:{property:er.w.maxAmount}})},Y=(0,b.useMemo)(function(){var e,t;return Object.values(null!=(e=null==E?void 0:E.metaType)?e:{}).includes("Memo")||Object.values(null!=(t=null==E?void 0:E.metaType)?t:{}).includes("Object")},[E]),validation=function(e){return{isValid:!e,error:e}};return eg.createElement(w._z,null,eg.createElement(w.mr,{backAction:function(){return d(-1)},title:m({id:"send.title"},{assetSymbol:"".concat(y.name," #").concat(v.onChainId," ")})}),eg.createElement(w.xV,null,p&&eg.createElement("div",{className:"pb-4"},eg.createElement(ea.J,null)),eg.createElement(w.Wo,null,eg.createElement("div",{className:"flex flex-col space-y-1 text-center pb-4"},eg.createElement("div",{className:"flex justify-center"},eg.createElement(M.C,{src:v.previewImageURL.url,name:y.blockchain.name,network:y.blockchain,size:D.m.XLARGE})),eg.createElement(C.x,{type:x.Xi.SUBTITLE,theme:x.W5.SECONDARY},m({id:"generic.on-network"},{networkName:y.blockchain.name}))),eg.createElement("div",{className:"pb-4"},eg.createElement(ei.o,{label:m({id:"input-address.address.label"}),value:T,onChange:function(e){return onRecipientChange(e.target.value)},placeholder:m({id:"input-address.address.placeholder"}),validation:validation(null==E?void 0:E.addressError),autoFocus:!0})),Y&&eg.createElement("div",{className:"pb-4"},eg.createElement(ei.o,{label:m({id:"input-memo.memo.label"}),value:I,onChange:function(e){return onMemoChange(e.target.value)},placeholder:m({id:"input-memo.memo.placeholder"})})),(null==E?void 0:E.showAmount)&&eg.createElement("div",{className:"pb-4"},eg.createElement(ei.o,{label:m({id:"input-amount.amount.label"}),value:R,onChange:function(e){return onAmountChange(e.target.value)},placeholder:m({id:"input-amount.amount.placeholder"}),validation:validation(null==E?void 0:E.amountError),actions:[{key:"1",placeholder:eg.createElement(C.x,{theme:x.W5.BRAND},"MAX"),onClick:function(){return onMaxBalanceClick()}}]}))),_&&eg.createElement("div",{className:"pb-4"},eg.createElement(eo.C,{blockchainName:y.blockchain.name})),eg.createElement(S.z,{disabled:!(null==E?void 0:E.isNextEnabled),onClick:function(){return d(o.Z.SEND_CONFIRM,{state:V})}},m({id:"generic.preview"}))))},eS=n(30037),eT=n(67294),Prepare=function(){var e=(0,r.UO)(),t=e.collectionId,n=e.nftId,a=e.assetId;return((0,eS.x)(function(){G.Tl.emit(es.Z.PREPARE_SEND,{action:er.m.CLOSE})}),a)?eT.createElement(Crypto,{assetId:a}):t&&n?eT.createElement(NFT,{collectionId:t,nftId:n}):null},eN=n(74577),ew=n(55861),eA=n(45851),eC=n(81655),ex=n(11722),eI=n(67294);function select_asset_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function select_asset_array_with_holes(e){if(Array.isArray(e))return e}function select_asset_iterable_to_array_limit(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}function select_asset_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function select_asset_sliced_to_array(e,t){return select_asset_array_with_holes(e)||select_asset_iterable_to_array_limit(e,t)||select_asset_unsupported_iterable_to_array(e,t)||select_asset_non_iterable_rest()}function select_asset_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return select_asset_array_like_to_array(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return select_asset_array_like_to_array(e,t)}}var SelectAsset=function(){(0,H.d)({event:q.pG.SEND_SELECT_CRYPTO,props:null});var e,t,n,a=(0,h.Z)().formatMessage,i=(0,r.s0)(),l=select_asset_sliced_to_array((0,b.useState)(""),2),c=l[0],s=l[1],u=null!=(n=(0,eC.M)())?n:void 0,m=null==(t=(0,U.Z)())||null==(e=t.warning)?void 0:e.showWarning;return eI.createElement(w._z,null,eI.createElement(w.mr,{backAction:function(){return i(-1)},title:a({id:"select-asset.send.title",defaultMessage:"Select asset to send"})}),eI.createElement(w.xV,null,eI.createElement("div",{className:"flex flex-col space-y-4 mb-4"},eI.createElement(eA.M,{testid:"input-search-asset",value:c,onChange:function(e){return s(e.target.value)},placeholder:a({id:"component.input-asset-search.placeholder"})}),eI.createElement(ew.N,{showText:!0}),m&&eI.createElement(ea.J,null)),eI.createElement(eN.n,{searchQuery:c,excludedBlockchainId:"binance",targetBlockchainId:u,onAssetRowClick:function(e){i("".concat(o.Z.SEND,"/").concat(e.assetId).concat(e.type===ex.t.BRC20?"/inscriptions":""))},emptyMessage:a({id:"token-asset-list.empty-search-caption"}),showNetworkName:!0})))},eO=n(48444),ek=n(67294),CircleSelector=function(e){return e.on?ek.createElement(eO.o,{width:16,height:16,colorClass:"text-primary"}):ek.createElement("div",{className:"border-backgroundTertiary border-2 rounded-lg w-4 h-4"})},eP=n(26086),eR=n(19001),eF=n(48679),ej=n(67294),Inscription=function(e){var t=e.inscription,n=e.asset,r=e.onClick;return ej.createElement(eR.Z,{noPadding:!0},ej.createElement(eP.e,{onClick:function(){return r(t.id)}},ej.createElement("div",{className:"p-2"},ej.createElement("div",{className:"flex justify-end"},ej.createElement(CircleSelector,{on:t.isSelected})),ej.createElement("div",{className:"flex items-center justify-center space-x-1 mb-4"},ej.createElement(M.C,{src:n.iconUrl,name:n.name,size:D.m.XXSMALL}),ej.createElement(C.x,null,t.amount," ",n.symbol))),ej.createElement(eF.i,{noMargin:!0}),ej.createElement("div",{className:"p-2 text-center"},ej.createElement(C.x,{type:x.Xi.CAPTION,theme:x.W5.SECONDARY},"#",t.inscriptionNumber))))},eM=n(80703),eD=n(96539),eZ=n(67294);function inscriptions_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function inscriptions_array_with_holes(e){if(Array.isArray(e))return e}function inscriptions_asyncGeneratorStep(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,a)}function inscriptions_async_to_generator(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function _next(e){inscriptions_asyncGeneratorStep(o,r,a,_next,_throw,"next",e)}function _throw(e){inscriptions_asyncGeneratorStep(o,r,a,_next,_throw,"throw",e)}_next(void 0)})}}function inscriptions_define_property(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function inscriptions_iterable_to_array_limit(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}function inscriptions_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function inscriptions_object_spread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){inscriptions_define_property(e,t,n[t])})}return e}function inscriptions_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):inscriptions_ownKeys(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function inscriptions_sliced_to_array(e,t){return inscriptions_array_with_holes(e)||inscriptions_iterable_to_array_limit(e,t)||inscriptions_unsupported_iterable_to_array(e,t)||inscriptions_non_iterable_rest()}function inscriptions_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return inscriptions_array_like_to_array(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return inscriptions_array_like_to_array(e,t)}}function inscriptions_ts_generator(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(n)throw TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var Inscriptions=function(){var e=(0,h.Z)().formatMessage,t=(0,r.s0)(),n=(0,r.UO)().assetId,i=(0,_.N6)(n);if(!i)throw Error('Could not find asset for assetId "'.concat(n,'"'));var l=(0,b.useContext)(a._),c=(0,eu.q)(i.blockchainId),s=(0,eM.K)(i.assetId),u="0"!==(0,eD.M)(i.assetId),m=inscriptions_sliced_to_array((0,b.useState)([]),2),d=m[0],p=m[1],f=inscriptions_sliced_to_array((0,b.useState)(u),2),y=f[0],v=f[1],E=(0,b.useMemo)(function(){return d.reduce(function(e,t){return t.isSelected?e+Number(t.amount):e},0)},[d]),toggleSelection=function(e){p(d.map(function(t){return t.id===e?_object_spread_props(inscriptions_object_spread({},t),{isSelected:!t.isSelected}):t}))};return(0,b.useEffect)(function(){inscriptions_async_to_generator(function(){return inscriptions_ts_generator(this,function(e){switch(e.label){case 0:if(!u)return[3,4];e.label=1;case 1:return e.trys.push([1,,3,4]),[4,G.Tl.emit(L.Z.FETCH_INSCRIPTIONS_BALANCE_FOR_ADDRESS,{blockchainId:c.id,address:i.address,decimals:i.decimals})];case 2:return p(e.sent().map(function(e){return _object_spread_props(inscriptions_object_spread({},e),{isSelected:!!l.inscriptions&&l.inscriptions.includes(e.id)})})),[3,4];case 3:return v(!1),[7];case 4:return[2]}})})()},[]),eZ.createElement(w._z,null,eZ.createElement(w.mr,{backAction:function(){return t(-1)},title:e({id:"send.title"},{assetSymbol:i.symbol})}),eZ.createElement(w.xV,null,eZ.createElement(w.Wo,null,eZ.createElement("div",{className:"flex flex-col space-y-1 text-center pb-4"},eZ.createElement("div",{className:"flex justify-center"},eZ.createElement(M.C,{src:i.iconUrl,name:i.name,network:i.address?c:void 0,size:D.m.LARGE})),eZ.createElement(C.x,{type:x.Xi.SUBTITLE,theme:x.W5.SECONDARY},e({id:"generic.on-network"},{networkName:c.name})),eZ.createElement("div",{className:"mt-1.5"},eZ.createElement(C.x,{type:x.Xi.SCREAMER},E," ",i.symbol))),eZ.createElement("div",{className:"flex flex-col space-y-4 mb-4"},eZ.createElement(eR.Z,null,eZ.createElement("div",{className:"flex items-center justify-between"},eZ.createElement("div",{className:"flex items-center space-x-2"},eZ.createElement(M.C,{src:i.iconUrl,name:i.name}),eZ.createElement("div",{className:"flex flex-col"},eZ.createElement(C.x,{type:x.Xi.CAPTION,theme:x.W5.SECONDARY},e({id:"send.non-transferable-balance"})),eZ.createElement(C.x,{type:x.Xi.TITLE},s," ",i.symbol))),eZ.createElement("div",null,eZ.createElement(S.z,{shape:T.AX.BADGE,onClick:function(){t("".concat(o.Z.SEND,"/").concat(i.assetId,"/inscribe"))}},e({id:"generic.inscribe"}))))),y&&eZ.createElement("div",{className:"text-center"},eZ.createElement(ec.$,null)),!y&&!u&&eZ.createElement("div",{className:"mx-auto"},eZ.createElement(C.x,{type:x.Xi.CAPTION,theme:x.W5.SECONDARY},e({id:"generic.inscription.no-transferable-disclaimer"},{assetSymbol:i.symbol}))),eZ.createElement("div",{className:"grid grid-cols-2 gap-4 justify-between"},d.map(function(e){return eZ.createElement(Inscription,{key:e.id,inscription:e,asset:i,onClick:toggleSelection})})))),eZ.createElement(S.z,{testid:"button-prepare-send-inscription",disabled:!E,onClick:function(){var e=d.filter(function(e){return e.isSelected}).map(function(e){return e.id});l.address="",l.amount=E.toString(),l.inscriptions=e,t("".concat(o.Z.SEND,"/").concat(i.assetId))}},e({id:"generic.continue"}))))};function useValidateAmount_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function useValidateAmount_array_with_holes(e){if(Array.isArray(e))return e}function useValidateAmount_define_property(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function useValidateAmount_iterable_to_array_limit(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}function useValidateAmount_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useValidateAmount_object_spread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){useValidateAmount_define_property(e,t,n[t])})}return e}function useValidateAmount_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function useValidateAmount_object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):useValidateAmount_ownKeys(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function useValidateAmount_sliced_to_array(e,t){return useValidateAmount_array_with_holes(e)||useValidateAmount_iterable_to_array_limit(e,t)||useValidateAmount_unsupported_iterable_to_array(e,t)||useValidateAmount_non_iterable_rest()}function useValidateAmount_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return useValidateAmount_array_like_to_array(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useValidateAmount_array_like_to_array(e,t)}}var validate=function(e){var t=e.value,n=e.decimals,r=e.minimum,a=e.maximum,o=e.minimumThreshold,i=e.minimumThresholdWarning,l={number:!1,decimals:!1,minimum:!1,maximum:!1,minimumThreshold:!1,minimumThresholdWarning:null};if(!t||"0"===t)return useValidateAmount_object_spread_props(useValidateAmount_object_spread({},l),{isValid:!1});try{var c=(0,y.Z)(t);l.number=!0,l.minimum=!r||c.gte((0,y.Z)(r)),l.maximum=!a||c.lte((0,y.Z)(a));var s=t.indexOf("."),u=-1!==s?t.substring(s+1):void 0;if(l.decimals=!u||"number"!=typeof n||u.length<=n,i&&"0"!==i.value&&a){var m=(0,y.Z)(a),d=(0,y.Z)(i.value);l.minimumThresholdWarning=m.gt(0)&&m.gte(c)&&m.minus(c).lt(d)?i.message:null}else l.minimumThresholdWarning=null;if(o&&"0"!==o&&a){var p=(0,y.Z)(a),_=(0,y.Z)(o);l.minimumThreshold=c.lte(p)&&p.minus(c).gte(_)}else l.minimumThreshold=!0}catch(e){}finally{return useValidateAmount_object_spread_props(useValidateAmount_object_spread({},l),{isValid:Object.entries(l).every(function(e){var t=useValidateAmount_sliced_to_array(e,2),n=t[0],r=t[1];return"minimumThresholdWarning"===n||!!r})})}},useValidateAmount=function(e){var t=e.value,n=e.asset,r=e.decimals,a=e.minimum,o=e.maximum,i=e.minimumThreshold,l=e.minimumThresholdWarning,c=(0,h.Z)().formatMessage,s=useValidateAmount_sliced_to_array((0,b.useState)({isValid:!1,number:!1,decimals:!1,minimum:!1,maximum:!1,minimumThreshold:!1,minimumThresholdWarning:null}),2),u=s[0],m=s[1];(0,b.useEffect)(function(){m(useValidateAmount_object_spread({},validate({value:t,asset:n,decimals:r,minimum:a,maximum:o,minimumThreshold:i,minimumThresholdWarning:l})))},[t,n,r,a,o]);var d=(0,b.useMemo)(function(){return u.number?u.decimals?u.minimum?u.maximum?u.minimumThreshold?u.minimumThresholdWarning?c({id:u.minimumThresholdWarning}):void 0:c({id:"validate-amount.minimum-threshold"},{number:i,asset:n.symbol}):c({id:"validate-amount.maximum"},{asset:n.symbol}):c({id:"validate-amount.minimum"},{number:a}):c({id:"validate-amount.decimals"},{number:r}):c({id:"validate-amount.generic"})},[c,u,n,r,a]);return{isValid:u.isValid,error:d}},eG=n(67294);function inscribe_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function inscribe_array_with_holes(e){if(Array.isArray(e))return e}function inscribe_iterable_to_array_limit(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}function inscribe_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function inscribe_sliced_to_array(e,t){return inscribe_array_with_holes(e)||inscribe_iterable_to_array_limit(e,t)||inscribe_unsupported_iterable_to_array(e,t)||inscribe_non_iterable_rest()}function inscribe_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return inscribe_array_like_to_array(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return inscribe_array_like_to_array(e,t)}}var Inscribe=function(){var e=(0,r.UO)().assetId,t=(0,r.s0)(),n=(0,h.Z)().formatMessage;if(!e)throw Error('Asset Id "'.concat(e,'" is invalid.'));var a=(0,_.N6)(e);if(!a)throw Error('Could not find asset for assetId "'.concat(e,'"'));var i=(0,eu.q)(a.blockchainId),l=(0,eM.K)(a.assetId),c=(0,k.mA)(i.coinId),s=(0,P.F)(),u=inscribe_sliced_to_array((0,b.useState)(""),2),m=u[0],p=u[1],f=useValidateAmount({value:m,asset:a,decimals:0,maximum:l,minimumThreshold:"0"}),y=(0,b.useMemo)(function(){return{asset:a,network:i,amount:m,to:c.address,type:O.k.Inscribe}},[a,i,m]),onAmountChange=function(e){var t=parseInt(e);p(isNaN(t)?"":t.toString())};return eG.createElement(w._z,null,eG.createElement(w.mr,{title:"".concat(n({id:"generic.inscribe"})," ").concat(a.symbol),backAction:function(){return t(-1)}}),eG.createElement(w.xV,null,eG.createElement(w.Wo,null,eG.createElement("div",{className:"flex flex-col space-y-1 text-center pb-4"},eG.createElement("div",{className:"flex justify-center"},eG.createElement(M.C,{src:a.iconUrl,name:a.name,network:a.address?i:void 0,size:D.m.LARGE})),eG.createElement(C.x,{type:x.Xi.SUBTITLE,theme:x.W5.SECONDARY},n({id:"generic.on-network"},{networkName:i.name}))),eG.createElement("div",{className:"pb-4"},eG.createElement(ei.o,{testid:"input-amount",label:n({id:"input-amount.amount.label"}),value:m,onChange:function(e){return onAmountChange(e.target.value)},placeholder:n({id:"input-amount.amount.placeholder"}),validation:f,actions:[{key:"max",placeholder:eG.createElement(C.x,{theme:x.W5.BRAND},"MAX"),disabled:"0"===l,onClick:function(){return p(l)}}]}),eG.createElement("div",{className:"flex space-x-1"},eG.createElement(C.x,{weight:x.kx.NORMAL,type:x.Xi.SUBTITLE,theme:x.W5.SECONDARY},n({id:"generic.available-balance"}),":"),eG.createElement(d.l,{testid:"inscribe-balance",weight:x.kx.NORMAL,textType:x.Xi.SUBTITLE,theme:x.W5.SECONDARY,amountType:R.F6.CRYPTO,value:l,currency:a.symbol,maxSignificantDecimals:10})))),s&&eG.createElement("div",{className:"pb-4"},eG.createElement(eo.C,{blockchainName:i.name})),eG.createElement(S.z,{testid:"button-prepare-inscribe-tx",disabled:!f.isValid,onClick:function(){return t(o.Z.SEND_CONFIRM,{state:y})}},n({id:"generic.continue"}))))},eL=n(67294),ContextLayout=function(){return eL.createElement(a._.Provider,{value:{}},eL.createElement(r.j3,null))},App=function(){return eL.createElement(r.Z5,null,eL.createElement(r.AW,{index:!0,element:eL.createElement(SelectAsset,null)}),eL.createElement(r.AW,{element:eL.createElement(ContextLayout,null)},eL.createElement(r.AW,{path:"/:assetId",element:eL.createElement(Prepare,null)}),eL.createElement(r.AW,{path:"/:collectionId/:nftId",element:eL.createElement(Prepare,null)}),eL.createElement(r.AW,{path:"/:assetId/inscriptions",element:eL.createElement(Inscriptions,null)}),eL.createElement(r.AW,{path:"/:assetId/inscribe",element:eL.createElement(Inscribe,null)}),eL.createElement(r.AW,{path:"/confirm",element:eL.createElement(Confirm,null)})))};let eV=App},80584:function(e,t,n){n.d(t,{Z:()=>a});var r=n(78817);let a={PREPARE_SEND:(0,r.Jp)("PrepareSend"),EARN:(0,r.Jp)("Earn"),STAKING_DETAILS:(0,r.Jp)("StakingDetails"),STAKE:(0,r.Jp)("Stake"),VALIDATOR_SELECT:(0,r.Jp)("ValidatorSelect"),GAS_STATUS:(0,r.Jp)("GasStatus"),GAS_STATION:(0,r.Jp)("GasStation")}},9984:function(e,t,n){n.d(t,{C:()=>useNFTCollection});var r=n(67294),a=n(45969),useNFTCollection=function(e){var t=(0,a.x)();return(0,r.useMemo)(function(){return t.find(function(t){return t.id===e})},[e,t])}},90560:function(e,t,n){n.d(t,{s:()=>useNFTItem});var r=n(43057),a=n(67294),useNFTItem=function(e,t){var n=(0,r.CG)(function(t){return t.nft.nfts[e].items});return(0,a.useMemo)(function(){return n.find(function(e){return e.id===t})},[n,t])}},96539:function(e,t,n){n.d(t,{M:()=>useTransferable});var r=n(65777);function useTransferable(e){var t;return(null==(t=(0,r.l)()[e])?void 0:t.transferable)||"0"}},26679:function(e,t,n){n.d(t,{C:()=>errorToValidation});var errorToValidation=function(e){return{isValid:!e,error:null!=e?e:void 0}}}}]);