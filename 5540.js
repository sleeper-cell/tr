"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([["5540"],{62148:function(e,t,r){r.r(t),r.d(t,{default:()=>set_passkeys});var a,n=r(67294),s=r(2165),i=r(88583),o=r(31127),l=r(19568),c=r(20763),u=r(72671),_=r(96492),y=r(48990),f=r(86896),p=r(67911),d=r(65878),m=r(98292),b=r(89250),h=r(3959),g=r(97509),v=r(1842),E=r(8968),k=r(45653),w=r(35670),A=r(90980),S=r(43057),T=r(23957),I=r(84088),x=r(71548),R=r(3105),C=r(67294);function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function _array_with_holes(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,a,n,s,i){try{var o=e[s](i),l=o.value}catch(e){r(e);return}o.done?t(l):Promise.resolve(l).then(a,n)}function _async_to_generator(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var s=e.apply(t,r);function _next(e){asyncGeneratorStep(s,a,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,n,_next,_throw,"throw",e)}_next(void 0)})}}function _iterable_to_array_limit(e,t){var r,a,n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return s}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(e,t){return _array_with_holes(e)||_iterable_to_array_limit(e,t)||_unsupported_iterable_to_array(e,t)||_non_iterable_rest()}function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _array_like_to_array(e,t)}}function _ts_generator(e,t){var r,a,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(e){return function(t){return step([e,t])}}function step(s){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,a=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var M=r(67294);function set_passkeys_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function set_passkeys_array_with_holes(e){if(Array.isArray(e))return e}function _define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function set_passkeys_iterable_to_array_limit(e,t){var r,a,n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return s}}function set_passkeys_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function set_passkeys_sliced_to_array(e,t){return set_passkeys_array_with_holes(e)||set_passkeys_iterable_to_array_limit(e,t)||set_passkeys_unsupported_iterable_to_array(e,t)||set_passkeys_non_iterable_rest()}function set_passkeys_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return set_passkeys_array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return set_passkeys_array_like_to_array(e,t)}}var O=(_define_property(a={},s.Af.CREATE_VERIFY_PASSWORD,i.Z),_define_property(a,s.Af.SET_BIOMETRICS,function(){var e,t=(0,S.CG)(function(e){return e.settings.passkeyId}),r=(0,S.TL)(),a=(0,f.Z)().formatMessage;(0,c.d)({event:y.pG.ONBOARDING_SET_BIOMETRICS,props:null});var s=(0,l.z)(),i=s.trackAnalytics,M=s.isAnalyticsEnabled,O=(0,b.s0)(),N=_sliced_to_array((0,n.useState)(null),2),B=N[0],P=N[1],j=(0,n.useContext)(o.t).data,G=_sliced_to_array((0,n.useState)(!1),2),U=G[0],Y=G[1],D=_sliced_to_array((0,n.useState)(0),2),L=D[0],W=D[1],Z=(e=_async_to_generator(function(){var e,a,n;return _ts_generator(this,function(s){switch(s.label){case 0:t&&O(h.Z.DEFAULT),Y(!0),P({id:"generic.biometrics-register",defaultMessage:"Register Biometrics"}),e=new R.Z,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,e.create()];case 2:if(!(a=s.sent()))return Y(!1),[2];return W(1),P({id:"generic.biometrics-verifying",defaultMessage:"Verifying Biometrics"}),[4,e.verify({credential:a.credential,password:a.password})];case 3:if(!s.sent())return[3,6];return W(2),[4,g.Tl.emit(v.Z.GENERATE_PASSKEY_VAULT,{password:a.password,payload:j.password})];case 4:return s.sent(),i({event:y.ih.BIOMETRICS_SET,forceTracking:null===M,props:{pageViewSource:y.pG.ONBOARDING_WELCOME}}),W(3),P({id:"generic.biometrics-redirecting",defaultMessage:"Redirecting"}),[4,(0,x._v)(2e3)];case 5:s.sent(),r(E.x.actions.setPasskeyId(a.credentialId)),O(h.Z.DEFAULT),s.label=6;case 6:return[3,8];case 7:return n=s.sent(),P(null),A.Z.error(n),Y(!1),[3,8];case 8:return[2]}})}),function(){return e.apply(this,arguments)});return C.createElement(_._z,null,C.createElement(u.C,{heading:a({id:"setup-biometrics.heading",defaultMessage:"Biometric authentication"}),subHeading:a({id:"setup-biometrics.subheading",defaultMessage:"A secure and simple way to unlock your wallet"}),activeTab:2},C.createElement("div",{className:"m-auto py-4"},C.createElement(m.h,{width:120,height:120})),U&&C.createElement("div",{className:"flex justify-center"},C.createElement("div",{className:"flex flex-col gap-2 justify-center p-4 text-left"},C.createElement("div",{className:"items-start"},C.createElement(I.X,{onChange:function(){},checked:L>=1},C.createElement(k.x,{theme:L>=1?w.W5.PRIMARY_DEFAULT:w.W5.UTILITY_1_OPACITY_2},a({id:"generic.biometrics-register",defaultMessage:"Register Biometrics"})))),C.createElement("div",{className:"items-start"},C.createElement(I.X,{onChange:function(){},checked:L>=2},C.createElement(k.x,{theme:L>=2?w.W5.PRIMARY_DEFAULT:w.W5.UTILITY_1_OPACITY_2},a({id:"generic.biometrics-verify",defaultMessage:"Verify Biometrics"})))))),C.createElement(p.z,{loadingData:B?C.createElement("div",{className:"text-on-primary"},a(B)):null,type:d.JB.BUTTON,theme:d.jM.PRIMARY,loading:U,onClick:Z},C.createElement("div",{className:"flex gap-2 text-on-primary items-center"},a({id:"generic.set-up-biometrics",defaultMessage:"Set up biometrics"}),C.createElement(T.Q,null)))))}),a);let set_passkeys=function(){var e=set_passkeys_sliced_to_array((0,n.useState)(s.Af.CREATE_VERIFY_PASSWORD),2),t=e[0],r=e[1],a=O[t];return M.createElement(a,{setCurrentStep:r})}}}]);