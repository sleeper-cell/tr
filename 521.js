"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([["521"],{30037:function(e,t,r){r.d(t,{x:()=>useEnhancedUnmount});var n=r(67294);function useEnhancedUnmount(e){(0,n.useEffect)(function(){return window.addEventListener("beforeunload",e),function(){e(),window.removeEventListener("beforeunload",e)}},[])}},27826:function(e,t,r){r.d(t,{Y:()=>AddressBookModal,U:()=>Q});var n,a,o=r(5131),l=r(63025),s=r(81242),i=r(67294),d=r(86896),c=r(71374),u=r(71912),_=r(45653),f=r(46856),m=r(35670),y=r(67294),CircledPlusIcon=function(e){var t=e.width,r=e.height,n=e.colorClass;return y.createElement("svg",{className:void 0===n?"text-primary":n,fill:"none",width:null!=t?t:20,height:null!=r?r:20,viewBox:"0 0 ".concat(20," ").concat(20),xmlns:"http://www.w3.org/2000/svg"},y.createElement("path",{id:"Vector",fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 10C2.5 14.1421 5.85786 17.5 10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10ZM11.0417 11.0417L11.0417 15L8.95833 15V11.0417H5L5 8.95833L8.95833 8.95833V5H11.0417V8.95833H15V11.0417H11.0417Z",fill:"currentColor"}))},p=r(12820),b=r(26086),h=r(71393),A=r(78729),v=r(48679),g=r(26007);function useValidateIsUnique(e,t,r){return(0,i.useMemo)(function(){var n=!t.includes(e);return{isValid:n,error:n?void 0:r}},[e,t,r])}var k=r(87647),E=r(67294);function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _array_with_holes(e){if(Array.isArray(e))return e}function _define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],l=!0,s=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{l||null==a.return||a.return()}finally{if(s)throw n}}return o}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_define_property(e,t,r[t])})}return e}function NewAddressBookWallet_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):NewAddressBookWallet_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function _sliced_to_array(e,t){return _array_with_holes(e)||_iterable_to_array_limit(e,t)||_unsupported_iterable_to_array(e,t)||_non_iterable_rest()}function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _array_like_to_array(e,t)}}function NewAddressBookWallet(e){var t=e.name,r=e.addresses,n=e.editedWallet,a=e.setName,o=e.onAddAddress,l=e.onSelectAddress,s=(0,d.Z)().formatMessage,u=(0,p.R)(!0),y=(0,c.TA)({asArray:!0}),w=(0,i.useMemo)(function(){return Object.entries(r).map(function(e){var t=_sliced_to_array(e,2),r=t[0],n=t[1],a=u.find(function(e){return e.coinId.toString()===r});return _object_spread_props(_object_spread({},n),{blockchain:a})})},[r,u]),M=useValidateIsUnique(t,y.filter(function(e){return e.id!==(null==n?void 0:n.id)}).map(function(e){return e.name}),s({id:"new-address-book-wallet.name-input.error",defaultMessage:"Name already exists"}));return E.createElement("div",{className:"flex flex-col gap-6"},E.createElement(f.o,{label:s({id:"new-address-book-wallet.name-input.label",defaultMessage:"Name"}),placeholder:s({id:"new-address-book-wallet.name-input.placeholder",defaultMessage:"Enter wallet name"}),value:t,validation:M,testid:"new-address-book-wallet-name-input",onChange:function(e){return a(e.target.value)}}),E.createElement("div",{className:"flex flex-col"},w.map(function(e){var t,r=e.address,n=e.blockchain;return E.createElement(b.e,{key:n.id,testid:"new-address-book-wallet-address-".concat(n.id),onClick:function(){l(n)}},E.createElement("div",{className:"flex items-center mb-2"},E.createElement(h.C,{name:n.name,size:A.m.SMALL,src:n.iconUrl}),E.createElement("div",{className:"pl-2 flex flex-col"},E.createElement(_.x,{type:m.Xi.SUBTITLE,weight:m.kx.BOLD,theme:m.W5.PRIMARY},null!=(t=n.displayName)?t:n.name),E.createElement(_.x,{type:m.Xi.CAPTION,weight:m.kx.NORMAL,theme:m.W5.SECONDARY},r.length>59?(0,k.j)({value:r,maxCharsPerSide:20}):r)),E.createElement("div",{className:"ml-auto"},E.createElement(g.X,{colorClass:"text-textThird"}))))}),!!w.length&&E.createElement(v.i,null),E.createElement(b.e,{testid:"add-address-button",onClick:o},E.createElement("div",{className:"flex items-center cursor-pointer gap-3 mb-6"},E.createElement(CircledPlusIcon,null),E.createElement("div",{className:"flex flex-col"},E.createElement(_.x,{type:m.Xi.TITLE,theme:m.W5.BRAND},s({id:"new-address-book-wallet.add-button.title",defaultMessage:"Add Address"})),E.createElement(_.x,{type:m.Xi.CAPTION,theme:m.W5.SECONDARY},s({id:"new-address-book-wallet.add-button.subtitle",defaultMessage:"Select an asset and add its corresponding address."})))))))}var w=r(74509),M=r(79965),S=r(96313),B=r(53099),O=r(67294);function BlockchainList_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function BlockchainList_array_with_holes(e){if(Array.isArray(e))return e}function BlockchainList_iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],l=!0,s=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{l||null==a.return||a.return()}finally{if(s)throw n}}return o}}function BlockchainList_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function BlockchainList_sliced_to_array(e,t){return BlockchainList_array_with_holes(e)||BlockchainList_iterable_to_array_limit(e,t)||BlockchainList_unsupported_iterable_to_array(e,t)||BlockchainList_non_iterable_rest()}function BlockchainList_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return BlockchainList_array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BlockchainList_array_like_to_array(e,t)}}function BlockchainList(e){var t=e.walletAddresses,r=e.setBlockchain,n=(0,d.Z)().formatMessage,a=(0,s.J)(),o=(0,B.Z)(),l=BlockchainList_sliced_to_array((0,i.useState)(""),2),c=l[0],u=l[1],y=(0,p.R)(!0),v=(0,i.useMemo)(function(){return y.filter(function(e){if(Object.keys(t).includes(e.coinId.toString())||o.type===S.S.PRIVATE_KEY&&!a[e.coinId])return!1;var r,n=c.toLowerCase();return e.name.toLowerCase().includes(n)||(null==(r=e.displayName)?void 0:r.toLowerCase().includes(n))||e.symbol.toLowerCase().includes(n)})},[y,t,c]);return O.createElement("div",{className:"flex flex-col gap-4"},O.createElement(f.o,{value:c,placeholder:n({id:"blockchain-list.search.placeholder",defaultMessage:"Search"}),testid:"blockchain-list-search-input",autoFocus:!0,onChange:function(e){return u(e.target.value)}}),O.createElement("div",{className:"flex flex-col gap-3"},v.map(function(e){var t,n;return O.createElement(b.e,{key:e.id,testid:"blockchain-list-item-".concat(e.id),onClick:function(){r(e)}},O.createElement("div",{className:"flex items-center"},O.createElement("div",null,O.createElement(h.C,{name:e.name,size:A.m.SMALL,src:e.iconUrl})),O.createElement("div",{className:"pl-2 flex flex-col"},O.createElement("div",{className:"flex space-x-1"},O.createElement(_.x,{testid:"blockchain-list-item-symbol-".concat(e.id),type:m.Xi.SUBTITLE,weight:m.kx.BOLD,theme:m.W5.PRIMARY},e.symbol),O.createElement(w.C,{text:null!=(t=e.displayName)?t:e.name})),O.createElement(_.x,{testid:"blockchain-list-item-name-".concat(e.id),type:m.Xi.CAPTION,weight:m.kx.NORMAL,theme:m.W5.SECONDARY},null!=(n=e.displayName)?n:e.name))))}),!v.length&&O.createElement("div",{className:"flex flex-col items-center justify-center h-full gap-4 my-6"},O.createElement(M.W,null),O.createElement(_.x,null,n({id:"blockchain-list.no-blockchains-found",defaultMessage:"No results were found"})))))}var T=r(85189),C=r(97509),x=r(65048),I=r(46736),L=r(51091);function useValidateAddress_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function useValidateAddress_array_with_holes(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,n,a,o,l){try{var s=e[o](l),i=s.value}catch(e){r(e);return}s.done?t(i):Promise.resolve(i).then(n,a)}function _async_to_generator(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function _next(e){asyncGeneratorStep(o,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,n,a,_next,_throw,"throw",e)}_next(void 0)})}}function useValidateAddress_iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],l=!0,s=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{l||null==a.return||a.return()}finally{if(s)throw n}}return o}}function useValidateAddress_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useValidateAddress_sliced_to_array(e,t){return useValidateAddress_array_with_holes(e)||useValidateAddress_iterable_to_array_limit(e,t)||useValidateAddress_unsupported_iterable_to_array(e,t)||useValidateAddress_non_iterable_rest()}function useValidateAddress_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return useValidateAddress_array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return useValidateAddress_array_like_to_array(e,t)}}function _ts_generator(e,t){var r,n,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,n=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var N=(n=_async_to_generator(function(e){var t,r,n;return _ts_generator(this,function(a){switch(a.label){case 0:t=e.value,r=e.blockchain,n=!1,a.label=1;case 1:if(a.trys.push([1,4,,5]),!t)return[3,3];return[4,C.Tl.emit(x.Z.VALIDATE_ADDRESS,{address:t,network:r})];case 2:n=a.sent(),a.label=3;case 3:return[3,5];case 4:return a.sent(),n=!1,[3,5];case 5:return[2,{isValid:n}]}})}),function(e){return n.apply(this,arguments)}),useValidateAddress=function(e){var t,r=e.value,n=e.blockchain,a=e.bypassAddressMatch,o=(0,d.Z)().formatMessage,l=(0,I.mA)(n.coinId),s=(0,T.s)(n.blockchain),c=(0,i.useMemo)(function(){var e;return null!=(e=null==l?void 0:l.address)?e:s},[l,s]),u=r&&c&&!a&&(0,L.normalize)(r.trim())===(0,L.normalize)(null!=(t=null==c?void 0:c.trim())?t:""),_=useValidateAddress_sliced_to_array((0,i.useState)({isValid:!1}),2),f=_[0],m=_[1];(0,i.useEffect)(function(){var e=!1;return _async_to_generator(function(){var t;return _ts_generator(this,function(a){switch(a.label){case 0:return[4,N({value:r,blockchain:n})];case 1:if(t=a.sent().isValid,e)return[2];return m({isValid:t&&!u}),[2]}})})(),function(){e=!0}},[n,r]);var y=(0,i.useMemo)(function(){if(!f.isValid)return o({id:"validate-address.".concat(u?"receiver-matches-sender":"generic")})},[o,f]);return{isValid:f.isValid,error:y}},j=r(67911),V=r(65531);function useValidateTag_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function useValidateTag_array_with_holes(e){if(Array.isArray(e))return e}function useValidateTag_iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],l=!0,s=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{l||null==a.return||a.return()}finally{if(s)throw n}}return o}}function useValidateTag_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useValidateTag_sliced_to_array(e,t){return useValidateTag_array_with_holes(e)||useValidateTag_iterable_to_array_limit(e,t)||useValidateTag_unsupported_iterable_to_array(e,t)||useValidateTag_non_iterable_rest()}function useValidateTag_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return useValidateTag_array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return useValidateTag_array_like_to_array(e,t)}}var useValidateTag=function(e){var t=(0,d.Z)().formatMessage,r=useValidateTag_sliced_to_array((0,i.useState)({isValid:!1}),2),n=r[0],a=r[1],o=useValidateTag_sliced_to_array((0,i.useState)(!1),2),l=o[0],s=o[1];(0,i.useEffect)(function(){var t=""===e||/^[0-9]+$/.test(e),r=parseInt(e)>=0&&0xffffffff>=parseInt(e);s(t),a({isValid:t&&r})},[e]);var c=(0,i.useMemo)(function(){if(!n.isValid)return t({id:l?"validate-tag.in-range":"validate-tag.all-numbers",defaultMessage:l?"Destination Tag must be between 0 and 4294967295":"Destination Tag must be a number"})},[t,n]);return{isValid:n.isValid,error:c}},D=r(67294);function AddressAndMemoInput_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function AddressAndMemoInput_array_with_holes(e){if(Array.isArray(e))return e}function AddressAndMemoInput_asyncGeneratorStep(e,t,r,n,a,o,l){try{var s=e[o](l),i=s.value}catch(e){r(e);return}s.done?t(i):Promise.resolve(i).then(n,a)}function AddressAndMemoInput_async_to_generator(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function _next(e){AddressAndMemoInput_asyncGeneratorStep(o,n,a,_next,_throw,"next",e)}function _throw(e){AddressAndMemoInput_asyncGeneratorStep(o,n,a,_next,_throw,"throw",e)}_next(void 0)})}}function AddressAndMemoInput_iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],l=!0,s=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{l||null==a.return||a.return()}finally{if(s)throw n}}return o}}function AddressAndMemoInput_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function AddressAndMemoInput_sliced_to_array(e,t){return AddressAndMemoInput_array_with_holes(e)||AddressAndMemoInput_iterable_to_array_limit(e,t)||AddressAndMemoInput_unsupported_iterable_to_array(e,t)||AddressAndMemoInput_non_iterable_rest()}function AddressAndMemoInput_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return AddressAndMemoInput_array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AddressAndMemoInput_array_like_to_array(e,t)}}function AddressAndMemoInput_ts_generator(e,t){var r,n,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,n=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function AddressAndMemoInput(e){var t,r,n=e.selectedBlockchain,a=e.addressAndMemo,o=e.setAddressAndMemo,l=(0,d.Z)().formatMessage,s=AddressAndMemoInput_sliced_to_array((0,i.useState)(null!=(t=null==a?void 0:a.address)?t:""),2),c=s[0],u=s[1],_=AddressAndMemoInput_sliced_to_array((0,i.useState)(null!=(r=null==a?void 0:a.memo)?r:""),2),m=_[0],y=_[1],p=AddressAndMemoInput_sliced_to_array((0,i.useState)(!1),2),b=p[0],h=p[1],A=(0,V.C3)({blockchainId:n.id});(0,i.useEffect)(function(){function _supportsMemo(){return(_supportsMemo=AddressAndMemoInput_async_to_generator(function(){return AddressAndMemoInput_ts_generator(this,function(e){switch(e.label){case 0:return[4,C.Tl.emit(x.Z.SUPPORTS_MEMO,n.id)];case 1:return h(e.sent()),[2]}})})).apply(this,arguments)}!function(){_supportsMemo.apply(this,arguments)}()},[n]);var v=useValidateAddress({value:c,blockchain:n,bypassAddressMatch:!0}),g=useValidateTag(m);return D.createElement("div",{className:"flex flex-col gap-4"},D.createElement(f.o,{label:l({id:"address-and-memo-input.address.label",defaultMessage:"Address or Domain Name"}),placeholder:l({id:"address-and-memo-input.address.placeholder",defaultMessage:"".concat(n.symbol," Address")},{symbol:n.symbol}),testid:"address-and-memo-input.address-input",autoFocus:!0,validation:v,value:c,onChange:function(e){return u(e.target.value)}}),(b||A)&&D.createElement(f.o,{label:l({id:b?"address-and-memo-input.memo.label":"address-and-memo-input.tag.label",defaultMessage:b?"Memo":"Destination Tag"}),placeholder:l({id:b?"address-and-memo-input.memo.placeholder":"address-and-memo-input.tag.placeholder",defaultMessage:b?"Memo":"Destination Tag"}),value:m,validation:A&&m?g:void 0,testid:"address-and-memo-input.memo-tag-input",onChange:function(e){return y(e.target.value)}}),D.createElement(j.z,{disabled:!v.isValid,onClick:function(){return o({address:c,memo:m})},testid:"address-and-memo-input.done-button"},l({id:"address-and-memo-input.button.label",defaultMessage:"Done"})))}var W=r(65878),P=r(67294);function CancelEditingConfirmationModal(e){var t=e.showCancelConfirmationModal,r=e.setShowCancelConfirmationModal,n=e.discardChanges,a=(0,d.Z)().formatMessage;return P.createElement(o.u,{title:a({id:"cancel-confirmation-modal.title",defaultMessage:"Are you sure you want to discard your changes?"}),size:A.m.SMALL,opened:t,hideCloseIcon:!0,centerTitle:!0,onClose:function(){return r(!1)}},P.createElement("div",{className:"flex gap-2"},P.createElement(j.z,{theme:W.jM.DANGER_TRANSPARENT,onClick:n},a({id:"address-book-modal.cancel-confirmation.discard",defaultMessage:"Discard Changes"})),P.createElement(j.z,{onClick:function(){r(!1)}},a({id:"address-book-modal.cancel-confirmation.keep-editing",defaultMessage:"Keep Editing"}))))}var R=r(21297),H=r(86686),U=r(36342),G=r(33929),Z=r(43057),K=r(64130),z=r(48990),X=r(19568),Y=r(77272),$=r(67294);function useAddressBookModalActions_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function useAddressBookModalActions_array_with_holes(e){if(Array.isArray(e))return e}function useAddressBookModalActions_define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function useAddressBookModalActions_iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],l=!0,s=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{l||null==a.return||a.return()}finally{if(s)throw n}}return o}}function useAddressBookModalActions_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useAddressBookModalActions_object_spread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){useAddressBookModalActions_define_property(e,t,r[t])})}return e}function useAddressBookModalActions_sliced_to_array(e,t){return useAddressBookModalActions_array_with_holes(e)||useAddressBookModalActions_iterable_to_array_limit(e,t)||useAddressBookModalActions_unsupported_iterable_to_array(e,t)||useAddressBookModalActions_non_iterable_rest()}function useAddressBookModalActions_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return useAddressBookModalActions_array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return useAddressBookModalActions_array_like_to_array(e,t)}}function useAddressBookModalActions(e,t,r,n,a,o,l,s,d,c,u,f){var y=(0,X.z)().trackAnalytics,p=useAddressBookModalActions_sliced_to_array((0,i.useState)(!1),2),b=p[0],h=p[1],addNewWallet=function(){if(!b){h(!0);var e,a={id:null!=(e=null==u?void 0:u.id)?e:crypto.randomUUID(),name:t,addresses:r};Z.h.dispatch(K.L.actions.setAddressBookWallet(a)),y({event:z.ih.SAVE_ADDRESS_BOOK_WALLET,props:{pageViewSource:n?z.pG.SEND_ADDRESS_BOOK:z.pG.SETTINGS_ADDRESS_BOOK}}),n?l(Q.SELECT_WALLET):c(),h(!1)}},deleteWallet=function(){Z.h.dispatch(K.L.actions.removeAddressBookWallet(u.id)),c()},deleteWalletAddress=function(){var e=useAddressBookModalActions_object_spread({},r);delete e[f.coinId],d(e),l(Q.NEW_WALLET)},navigateBack=function(){e===Q.NEW_WALLET?o?s(!0):n?l(Q.SELECT_WALLET):c():e===Q.INPUT_ADDRESS_AND_MEMO&&a?l(Q.NEW_WALLET):l(e-1)};return(0,i.useMemo)(function(){var n=[];switch(e){case Q.SELECT_WALLET:n.push({key:"done-action",buttonElement:$.createElement(_.x,{theme:m.W5.BRAND},"Done"),placement:H.D1.RIGHT,onClick:c},{key:"add-wallet-action",buttonElement:$.createElement(R.p,{colorClass:"text-primary"}),placement:H.D1.RIGHT,onClick:function(){return l(Q.NEW_WALLET)}});break;case Q.NEW_WALLET:u&&n.push({key:"delete-wallet-action",buttonElement:$.createElement(Y.Q,{width:20,height:20,colorClass:"text-error"}),placement:H.D1.RIGHT,onClick:deleteWallet}),n.push({key:"add-new-wallet-action",buttonElement:$.createElement(G.n,{colorClass:"text-primary"}),disabled:!t||!Object.values(r).length,placement:H.D1.RIGHT,onClick:addNewWallet});break;case Q.INPUT_ADDRESS_AND_MEMO:n.push({key:"delete-wallet-action",buttonElement:$.createElement(Y.Q,{width:20,height:20,colorClass:"text-error"}),placement:H.D1.RIGHT,onClick:deleteWalletAddress})}return e>0&&n.push({key:"back-action",buttonElement:$.createElement(U.Y,{colorClass:"text-textThird"}),placement:H.D1.LEFT,onClick:navigateBack}),n},[e,t,r])}function useAddressBookModalTitles(e,t){return(0,i.useMemo)(function(){switch(e){case Q.SELECT_WALLET:return{id:"address-book-modal.title",defaultMessage:"Address Book"};case Q.NEW_WALLET:return{id:"address-book-modal.add-wallet.title",defaultMessage:"Wallet Address"};case Q.SELECT_ASSET:return{id:"address-book-modal.select-asset.title",defaultMessage:"Select Asset"};case Q.INPUT_ADDRESS_AND_MEMO:return t?{id:"address-book-modal.edit-address-and-memo.title",defaultMessage:"Edit"}:{id:"address-book-modal.input-address-and-memo.title",defaultMessage:"Add Address"};default:return{id:"",defaultMessage:"Header config missing"}}},[e])}var F=r(20763),J=r(67294);function AddressBookModal_array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function AddressBookModal_array_with_holes(e){if(Array.isArray(e))return e}function _array_without_holes(e){if(Array.isArray(e))return AddressBookModal_array_like_to_array(e)}function AddressBookModal_define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _iterable_to_array(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function AddressBookModal_iterable_to_array_limit(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],l=!0,s=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{l||null==a.return||a.return()}finally{if(s)throw n}}return o}}function AddressBookModal_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function AddressBookModal_object_spread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){AddressBookModal_define_property(e,t,r[t])})}return e}function AddressBookModal_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function AddressBookModal_object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):AddressBookModal_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function AddressBookModal_sliced_to_array(e,t){return AddressBookModal_array_with_holes(e)||AddressBookModal_iterable_to_array_limit(e,t)||AddressBookModal_unsupported_iterable_to_array(e,t)||AddressBookModal_non_iterable_rest()}function _to_consumable_array(e){return _array_without_holes(e)||_iterable_to_array(e)||AddressBookModal_unsupported_iterable_to_array(e)||_non_iterable_spread()}function AddressBookModal_unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return AddressBookModal_array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AddressBookModal_array_like_to_array(e,t)}}var Q=((a={})[a.SELECT_WALLET=0]="SELECT_WALLET",a[a.NEW_WALLET=1]="NEW_WALLET",a[a.SELECT_ASSET=2]="SELECT_ASSET",a[a.INPUT_ADDRESS_AND_MEMO=3]="INPUT_ADDRESS_AND_MEMO",a);function AddressBookModal(e){var t,r,n,a,_=e.isOpened,f=e.coinId,m=e.editedWalletId,y=e.step,p=e.onClose,b=(0,d.Z)().formatMessage,h=(0,l.r)().wallets,A=(0,s.x)(),v=(0,c.TB)(f),g=(0,B.O)(),k=(0,c.fT)(m),E=(0,i.useRef)(!1),w=(0,i.useRef)(!1),M=AddressBookModal_sliced_to_array((0,i.useState)(null!=y?y:0),2),S=M[0],O=M[1],T=AddressBookModal_sliced_to_array((0,i.useState)(null!=(t=null==k?void 0:k.name)?t:""),2),C=T[0],x=T[1],I=AddressBookModal_sliced_to_array((0,i.useState)(null!=(r=null==k?void 0:k.addresses)?r:{}),2),L=I[0],N=I[1],j=AddressBookModal_sliced_to_array((0,i.useState)(),2),V=j[0],D=j[1],W=AddressBookModal_sliced_to_array((0,i.useState)(),2),P=W[0],R=W[1],H=AddressBookModal_sliced_to_array((0,i.useState)(!1),2),U=H[0],G=H[1],Z=_to_consumable_array((0,i.useMemo)(function(){return h.filter(function(e){var t;return e.id!==g&&(null==(t=e.coinsRegisteredMap)?void 0:t[f])}).map(function(e){return{id:e.id,name:e.name,addresses:A[e.id]}})},[h,A])).concat(_to_consumable_array(v)),K=!!f,X=(null!=(n=null==k?void 0:k.name)?n:"")!==C||JSON.stringify(null!=(a=null==k?void 0:k.addresses)?a:{})!==JSON.stringify(L);(0,F.d)({event:K?z.pG.SEND_ADDRESS_BOOK:z.pG.SETTINGS_ADDRESS_BOOK,props:null}),(0,i.useEffect)(function(){return function(){return O(0)}},[]),(0,i.useEffect)(function(){S<3&&(E.current=!1),1===S&&R(void 0),0===S&&(x(""),N({}),D(void 0),R(void 0))},[S]);var Y=useAddressBookModalActions(S,C,L,K,E.current,X,O,G,N,p,k,V),$=useAddressBookModalTitles(S,E.current);return J.createElement(o.u,{title:b($),opened:_,actions:Y,hideCloseIcon:!0,centerTitle:!0,onClose:function(){X?(w.current=!0,G(!0)):p()}},0===S&&J.createElement(u.A,{wallets:Z,selectWallet:function(e){p(e.addresses[f])},addWallet:function(){return O(1)}}),1===S&&J.createElement(NewAddressBookWallet,{name:C,addresses:L,editedWallet:k,setName:x,onAddAddress:function(){return O(2)},onSelectAddress:function(e){D(e),R(L[e.coinId]),O(3),E.current=!0}}),2===S&&J.createElement(BlockchainList,{walletAddresses:L,setBlockchain:function(e){D(e),O(3)}}),3===S&&J.createElement(AddressAndMemoInput,{selectedBlockchain:V,addressAndMemo:P,setAddressAndMemo:function(e){N(AddressBookModal_object_spread_props(AddressBookModal_object_spread({},L),AddressBookModal_define_property({},V.coinId,e))),O(1)}}),U&&J.createElement(CancelEditingConfirmationModal,{showCancelConfirmationModal:U,setShowCancelConfirmationModal:G,discardChanges:function(){(!K||w.current)&&p(),G(!1),O(0)}}))}},71912:function(e,t,r){r.d(t,{A:()=>SelectAddressBookWallet});var n=r(86416),a=r(45653),o=r(26007),l=r(86896),s=r(84525),i=r(67911),d=r(65878),c=r(35670),u=r(26086),_=r(67294);function SelectAddressBookWallet(e){var t=e.wallets,r=e.addWallet,f=e.selectWallet,m=(0,l.Z)().formatMessage;return _.createElement("div",{className:"flex flex-col gap-2 my-6"},null==t?void 0:t.map(function(e){return _.createElement(u.e,{testid:"select-address-book-wallet-".concat(e.id),onClick:function(){return f(e)},key:e.id},_.createElement("div",{className:"flex items-center justify-between bg-bg3 p-4 rounded-xl"},_.createElement("div",{className:"flex items-center space-x-2"},_.createElement(n.o,{colorClass:"text-textThird"}),_.createElement(a.x,null,e.name)),_.createElement(o.X,{colorClass:"text-textThird"})))}),!(null==t?void 0:t.length)&&_.createElement("div",{className:"flex flex-col items-center justify-center gap-6 my-6"},_.createElement(s.D,null),_.createElement("div",{className:"flex text-center px-6"},_.createElement(a.x,{type:c.Xi.CAPTION,theme:c.W5.THIRD},m({id:"settings.address-book.no-wallets",defaultMessage:"Your contacts and their wallet addresses will appear here."}))),_.createElement(i.z,{testid:"add-wallet-button",onClick:r,theme:d.jM.BRAND},m({id:"settings.address-book.add-wallet",defaultMessage:"Add wallet address"}))))}},77272:function(e,t,r){r.d(t,{Q:()=>BinIcon});var n=r(67294),BinIcon=function(e){var t=e.width,r=e.height,a=e.colorClass;return n.createElement("svg",{className:a,fill:"none",width:null!=t?t:24,height:null!=r?r:24,viewBox:"0 0 ".concat(24," ").concat(24),xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{x:"3",y:"4",width:"18",height:"3",fill:"currentColor"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 2H9V4H15V2ZM19 7H5V21H19V7ZM10.5 9H8V18H10.5V9ZM13.5 9H16V18H13.5V9Z",fill:"currentColor"}))}},99303:function(e,t,r){r.d(t,{W:()=>SubAccountIcon});var n=r(67294),SubAccountIcon=function(e){var t=e.width,r=e.height,a=e.colorClass;return n.createElement("svg",{className:void 0===a?"text-primary":a,fill:"none",width:null!=t?t:20,height:null!=r?r:20,viewBox:"0 0 ".concat(20," ").concat(20),xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{id:"ic/sub-account-f"},n.createElement("path",{id:"Union",fillRule:"evenodd",clipRule:"evenodd",d:"M10 7.08329C10 8.69412 8.69416 9.99996 7.08333 9.99996C5.4725 9.99996 4.16667 8.69412 4.16667 7.08329C4.16667 5.47246 5.4725 4.16663 7.08333 4.16663C8.69416 4.16663 10 5.47246 10 7.08329ZM2.5 14.6666C2.5 13.0098 3.84315 11.6666 5.5 11.6666H8.66667C10.3235 11.6666 11.6667 13.0098 11.6667 14.6666V16.6666H2.5V14.6666ZM17.5 4.16663H13.3333V6.66663H17.5V4.16663ZM17.5 8.33492H13.3333V10.8349H17.5V8.33492ZM13.3333 12.5032H17.5V15.0032H13.3333V12.5032Z",fill:"currentColor"})))}},71374:function(e,t,r){r.d(t,{TA:()=>useAddressBook,TB:()=>useAddressBookWalletsForCoinId,fT:()=>useAddressBookWallet});var n=r(43057);function useAddressBook(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.asArray,r=(0,n.CG)(function(e){return e.wallet.addressBook});return void 0!==t&&t?Object.values(r):r}function useAddressBookWallet(e){return(0,n.CG)(function(e){return e.wallet.addressBook})[e]}function useAddressBookWalletsForCoinId(e){var t=useAddressBook({asArray:!0});return e?t.filter(function(t){return t.addresses[e]}):t}}}]);